#!/bin/bash
 
# FortranRunner2 has exactly one difference of using more phi values, 40 of them instead of just 20
PHI="    0.0000000000000 0.15707963267948966 0.3141592653589793 0.47123889803846897 0.6283185307179586 0.7853981633974483 0.9424777960769379 1.0995574287564276 1.2566370614359172 1.413716694115407 1.5707963267948966 1.7278759594743862 1.8849555921538759 2.0420352248333655 2.199114857512855 2.356194490192345 2.5132741228718345 2.670353755551324 2.827433388230814 2.9845130209103035 3.141592653589793 3.2986722862692828 3.4557519189487724 3.612831551628262 3.7699111843077517 3.9269908169872414 4.084070449666731 4.241150082346221 4.39822971502571 4.5553093477052 4.71238898038469 4.869468613064179 5.026548245743669 5.183627878423159 5.340707511102648 5.497787143782138 5.654866776461628 5.811946409141117 5.969026041820607 6.126105674500097"

for phi in $PHI; do
    mydir='PHI_'$phi
    mkdir $mydir
    awk -v phi=$phi '{if($3 == "phi:") {print phi" ! phi: phase difference"} else {print $0}}' MultiIn0 > $mydir/input.dat 
    cd $mydir
    mpirun -n 8 ../a.out
    cd ..
done

